<!-- Language Switcher -->
<div class="language-switcher mt-4 mb-3">
  <h5 class="mb-2"><i class="fas fa-globe me-2"></i>語言 / Language</h5>
  <div class="d-flex flex-wrap gap-2">
    {% assign current_lang = page.lang | default: site.lang | default: 'zh-tw' %}
    {% assign current_path = page.url %}
    
    <!-- 判斷當前語言（適用於 GitHub Pages） -->
    {% if current_path contains '/en/' or current_path == '/en' %}
      {% assign current_lang = 'en' %}
    {% else %}
      {% assign current_lang = 'zh-tw' %}
    {% endif %}
    
    {% for lang in site.languages %}
      {% if lang == current_lang %}
        <span class="badge bg-primary">
          {% if lang == 'zh-tw' %}繁體中文{% elsif lang == 'en' %}English{% else %}{{ lang | upcase }}{% endif %}
        </span>
      {% else %}
        {% if lang == site.default_lang %}
          <a href="{{ site.baseurl }}/" class="badge bg-secondary text-decoration-none">
        {% else %}
          <a href="{{ site.baseurl }}/{{ lang }}/" class="badge bg-secondary text-decoration-none">
        {% endif %}
          {% if lang == 'zh-tw' %}繁體中文{% elsif lang == 'en' %}English{% else %}{{ lang | upcase }}{% endif %}
        </a>
      {% endif %}
    {% endfor %}
  </div>
</div>